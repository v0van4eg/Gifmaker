# Документация к проекту "Генератор GIF"

## Оглавление
1. [Описание проекта](#описание-проекта)
2. [Структура проекта](#структура-проекта)
3. [Микросервисы](#микросервисы)
4. [Установка и запуск](#установка-и-запуск)
5. [Использование](#использование)
6. [API](#api)
7. [Технические детали](#технические-детали)
8. [Лицензия](#лицензия)

---

## Описание проекта

Проект "Генератор GIF" представляет собой веб-приложение, которое позволяет пользователям загружать изображения, изменять их порядок и создавать анимированные GIF-файлы. Проект построен на основе микросервисной архитектуры, где каждый сервис отвечает за определённую функциональность. Основные функции включают загрузку изображений, их обработку, изменение порядка и генерацию GIF.

---

## Структура проекта

Проект состоит из нескольких директорий и файлов:

```
/home/poly/PythonProjects/Gifmaker
├── docker-compose.yml
├── gif_generator
│   ├── Dockerfile
│   ├── main.py
│   └── requirements.txt
├── image_processing
│   ├── Dockerfile
│   ├── main.py
│   └── requirements.txt
├── nginx
│   └── api_gateway.conf
├── requirements.txt
├── services.txt
├── static_files
│   ├── css
│   │   └── styles.css
│   └── js
│       └── app.js
├── templates
│   └── index.html
├── web_ui
│   ├── Dockerfile
│   ├── main.py
│   └── requirements.txt
```

### Основные файлы:
- **docker-compose.yml**: Конфигурация Docker Compose для запуска всех микросервисов.
- **gif_generator/**: Микросервис для генерации GIF.
- **image_processing/**: Микросервис для обработки изображений (загрузка, удаление, изменение порядка).
- **nginx/**: Конфигурация Nginx для API Gateway.
- **static_files/**: Статические файлы (CSS, JS) для веб-интерфейса.
- **templates/**: HTML-шаблоны для веб-интерфейса.
- **web_ui/**: Веб-интерфейс для взаимодействия с пользователем.

---

## Микросервисы

Проект разделён на несколько микросервисов, каждый из которых выполняет определённые функции:

1. **image_processing**:
   - Загрузка изображений (`/upload`).
   - Удаление изображений (`/remove_image`).
   - Изменение порядка изображений (`/reorder_images`).

2. **gif_generator**:
   - Генерация GIF из загруженных изображений (`/generate_gif`).

3. **web_ui**:
   - Веб-интерфейс для взаимодействия с пользователем.
   - Управление сессиями (`/new_session`).

4. **nginx**:
   - API Gateway для маршрутизации запросов между микросервисами.

---

## Установка и запуск

### Требования:
- Docker и Docker Compose установлены на вашем компьютере.

### Инструкции по запуску:

1. **Клонируйте репозиторий**:
   ```bash
   git clone <репозиторий>
   cd <директория_проекта>
   ```

2. **Соберите и запустите контейнеры**:
   ```bash
   docker-compose up --build
   ```

3. **Откройте веб-интерфейс**:
   - Перейдите по адресу `http://localhost:5000` в вашем браузере.

---

## Использование

1. **Загрузка изображений**:
   - Перетащите изображения в область загрузки или выберите файлы через диалоговое окно.
   - Изображения будут загружены и отображены на странице.

2. **Изменение порядка изображений**:
   - Перетащите изображения, чтобы изменить их порядок.
   - Нажмите кнопку "Изменить порядок сортировки", чтобы перевернуть порядок.

3. **Генерация GIF**:
   - Укажите параметры для GIF (длительность кадра, количество циклов, размер).
   - Нажмите кнопку "Создать GIF".
   - После завершения генерации, GIF будет отображён на странице, и вы сможете его скачать.

4. **Новая сессия**:
   - Нажмите кнопку "Новая сессия", чтобы очистить текущие данные и начать заново.

---

## API

### Основные эндпоинты:

1. **Загрузка изображений**:
   - **Метод**: POST
   - **URL**: `/upload`
   - **Параметры**: `files` (список файлов для загрузки).
   - **Заголовки**: `X-Session-ID` (идентификатор сессии).

2. **Удаление изображения**:
   - **Метод**: POST
   - **URL**: `/remove_image`
   - **Параметры**: `image_name` (имя файла для удаления).
   - **Заголовки**: `X-Session-ID`.

3. **Изменение порядка изображений**:
   - **Метод**: POST
   - **URL**: `/reorder_images`
   - **Параметры**: `image_order` (JSON с порядком изображений).
   - **Заголовки**: `X-Session-ID`.

4. **Генерация GIF**:
   - **Метод**: POST
   - **URL**: `/generate_gif`
   - **Параметры**: `duration`, `loop`, `resize`, `image_order`.
   - **Заголовки**: `X-Session-ID`.

---

## Технические детали

### Используемые технологии:
- **Python**: Основной язык программирования для микросервисов.
- **Flask**: Веб-фреймворк для создания API и веб-интерфейса.
- **Docker**: Контейнеризация приложения.
- **Nginx**: API Gateway для маршрутизации запросов.
- **JavaScript/jQuery**: Клиентская часть для взаимодействия с пользователем.

### Зависимости:
- Все зависимости указаны в файлах `requirements.txt` для каждого микросервиса.

---

## Лицензия

Проект распространяется под лицензией MIT. Подробности см. в файле LICENSE.

---

## Заключение

Проект "Генератор GIF" предоставляет удобный инструмент для создания анимированных GIF-файлов из загруженных изображений. Благодаря микросервисной архитектуре, проект легко масштабируется и поддерживается.
